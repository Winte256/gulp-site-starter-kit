# Верстка проекта #

Верстка проекта выполнена с учетом BEM методологии [https://ru.bem.info](https://ru.bem.info) при использовании сборщика GULP [http://gulpjs.com](http://gulpjs.com) проектов

## Файловая структура верстки ##

* blocks - BEM блоки
* blocks/{BEMBLOCK}/{BEMBLOCK}.jade - шаблон блока
* public - временная папка со сборкой страницы проекта
* gulpfile.js - задачи для gulp (сборщика верстки)
* webpack.config.js - сборка javascript

### 1. Установка npm и зависимостей ###

[https://www.npmjs.com/package/npm](https://www.npmjs.com/package/npm) - должно быть установлено глобально, требует поддержки git команд в консоли, после корректной установки выполнить:

> npm install

### 3. Сборка проекта ###

C помощью команды:

> npm run gulp

## Файл заданий gulpfile.js ##

Проект состоит из нескольких задач: default, server, build, html, css, images, js. Чтобы запустить конкретной задачу можно воспользоваться командой:

> npm run gulp имя_задачи

Задачи css, images, js собираются в папку html/public

Подключаемые модули gulp подключены в самом верху файла

Конфигурация сборщика храниться в объекте params и содержит следующие переменные:

* out - папка для сборки (public)
* prod - путь для сборки для основного вебсайта
* htmlSrc - собираемый макет
* html - отслеживаемые pug и json файлы
* levels - уровни переопределения
* js - внешние js файлы
* css - внешние css файлы
* images - внешние файлы изображений
* type - типы распозноваемых файлов для заданий

### 1. Задача default ###

Запускает задачи server и build

### 2. Задача server ###

Подготоваливает компонент browserSync, открывает браузер и смотрит за изменениями в файлах заданий: html, css, images, js, при необоходимости перезагружает браузер

### 3. Задача build ###

Запускает задачи сборки проекта html, css, images, js

### 4. Задача html ###

Переименовывает собираемый макет params.htmlSrc и сохраняет в params.out

### 5. Задача css ###

Собирает указанные в params.css и params.type.css в файл с именем styles.css, сохраняет в params.out. Обрезает неиспользуемые классы стилей за исключением указанных в params.ignore (указывается либо регулярное выражение, либо css селектор)

### 6. Задача images ###

Собирает указанные в params.images и params.type.images, сохраняет в папку params.out/images

**Важно:** изображения с одинаковым именем перезаписываются

### 7. Задача js ###

Собирает указанные в params.js и params.type.js в файл с именем main.js, сохраняет в params.out

### 8. Задача createBlocks ###

Создает файлы и папки ваших блоков в папки уровней переопределения блоков (блоки добавляются в виде строк в массив params.blocks)